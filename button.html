<div class="godibox" style="color: rgb(255, 255, 255); background-color: rgb(206, 86, 86); text-align: center; letter-spacing: 2px; font-size: 22px; cursor: pointer; padding: 15px"></div>
<script>
    function getNextGottesdienstMessage() {

        var date = new Date();

        var dayOfWeek = date.getDay();
        var daysUntilSunday = 7 - dayOfWeek;

        var isSundayMorning = date.getHours() <= 11 && dayOfWeek === 0;
        if (isSundayMorning) {
            daysUntilSunday = 0;
        }

        var dayOfMonth = date.getDate();
        var nextSunday = dayOfMonth + daysUntilSunday;

        // At this point, nextSunday COULD be greater than 31 (next month).
        // setDate() is smart enough to increment the month in that case.
        date.setDate(nextSunday);

        if (date.getDate() <= 7) {
            // First Sunday of the month. We don't meet. Set it to next week.
            date.setDate(date.getDate() + 7);
        }

        var locale = "de-DE";
        var isEnglish = location.pathname.match(/\/en\//)
        if (isEnglish) {
            locale = "en-GB";
        }

        var dateString = date.toLocaleDateString(locale, {"day":"numeric", "month":"long"});

        if (locale === "de-DE") {

            return "Der nÃ¤chste Gottesdienst ist am "
                + dateString
                + " um 11 Uhr im K2";

        } else {

            return "The next worship service is on "
                + dateString
                + " at 11:00 at K2";
        }
    }

    var buttons = document.getElementsByClassName("godibox");
    Array.prototype.forEach.call(buttons,
        function(element) {
            element.innerHTML = getNextGottesdienstMessage();
        }
    );

</script>